# diary-ai

diary-ai provides a pipeline for processing, embedding, and storing diary entries using OpenAI's embedding API and Qdrant vector database

## Prerequisites

#### Dependencies
* [Python 3.11+](https://www.python.org/downloads/)
* [Poetry](https://python-poetry.org/docs/#installation)

#### External Services
* Create a [Qdrant Account](https://qdrant.tech/) a free one will do
* Create an [Open API Secret Key](https://platform.openai.com/api-keys)

## Usage

After installation, you can use diary-ai by running the following

```shell
  python prompt.py
```
## Before installation

> `PRODUCT_API` effects the `embedding` of the data and the qdrant collection size
> 
> Which means if you store your data with openai embedding you must have it for embedding of the prompt as well

> `GENERATION_API` is for deciding which api to send your prompt to 
> 
> So you can store your data with openai and send your prompt to gemini 

Create two different collections and run setup twice to store the diaries with different embeddings
if you want to play around


## Installation

```shell
  poetry install
```

Create a `.env` file and add the following to it

```dotenv
QDRANT_URL=qdrant_endpoint # you can find it in the cluster
QDRANT_API_KEY=api_key
QDRANT_COLLECTION=collection_name # defaults to diaries
OPEN_AI_API_KEY=api_key
OPEN_AI_EMBEDDING_MODEL=text-embedding-ada-002 # default text-embedding-ada-002
GEMINI_API_KEY=api_key
GEMINI_EMBEDDING_MODEL=gemini-embedding-001 # default gemini-embedding-001
PRODUCT_API=openai # options are openai or gemini
GENERATION_API=openai # options are openai or gemini
VERBOSE=false # defaults to false
```

Run the following script

```shell
  python setup.py
```

> Note: the method [store_diary_entry](qdrant_utils/qdrant_repository.py) will not allow duplication of samples

## Reset Qdrant Data
You can use the following script to delete all qdrant data in your `QDRANT_COLLECTION`

```shell
  python qdrant_utils/delete_collection_data.py
```

## The diary_samples

### freya and marc
Those samples where generated by chatGPT and are fictional characters

### dee
This is the diary of [John Dee](https://www.gutenberg.org/ebooks/19553)

### yone
This is Yon√© Noguchi [The American Diary Of a Japanese Girl](https://www.gutenberg.org/ebooks/63256)

### pepys
This is the diary of [Samuel Pepys](https://www.gutenberg.org/ebooks/4200)
